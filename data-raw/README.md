# Creating package data <a href="https://m-delem.github.io/aphantasiaCognitiveClustering/"><img src="../man/figures/logo.png" align="right" height="139" alt="aphantasiaCognitiveClustering website" /></a>

This folder contains scripts that were used to import or create the processed
data and analytic objects included in the package.

- `01_raw_data_extraction.R` contains the code to import the raw data from the
    OSF study project. It uses the `osfr` package to download the data. A ZIP
    archive with raw JATOS data files (JSON data in .txt within nested folders) 
    and an Excel file containing manually scored data are imported in 
    `inst/extdata/`. The archive needs to be unzipped in this folder. This
    creates a collection of folders with the format 
    `inst/extdata/study_result_XXXX/...` and a `metadata.xlsx` file.

- `02_create_data_files.R` contains the code to extract and process the raw data
    into clean data files. It loads a collection of functions dedicated to this
    task from `data_processing_functions.R`. The variety of functions created
    is due to the fact that the JSON data were generated by different JavaScript
    libraries (SurveyJS, jsPsych and OpenSesame). Besides, two sub-datasets
    (reading comprehension data and similarities test data) had to be manually
    scored. The functions that were used to extract their raw data is in
    `data_processing_functions.R` as well, but `02_create_data_files.R` is set
    to use the already scored data downloaded from OSF. The final clean datasets
    are then exported as Excel, CSV and RDS files in `inst/extdata/`. They have
    been uploaded to OSF, but not GitHub. *Note that this suite of functions is 
    not built in the "frontend" of the package because the raw files took a bit
    of time to process, weren't straightforward to test, were very specific and 
    most of all it felt like keeping raw study files in a GitHub repository was 
    not a great idea.*

- `03_study_data.R` uses `osfr` once again to download the clean data in RDS
    format created in the previous script from OSF, and creates the final 
    package data from it (in RDA format).

- `04_models_list.R` contains the code to run the Bayesian linear models fitted
    in the analyses. All the functions are documented in the package, this
    script only exists because model fitting takes a while. The object created
    has been saved as package data in RDA format.

The `study_data` and `models_list` objects created in the last two scripts are 
documented in the package.
